{"filter":false,"title":"pins_controller.rb","tooltip":"/app/controllers/pins_controller.rb","undoManager":{"mark":54,"position":54,"stack":[[{"start":{"row":0,"column":0},"end":{"row":48,"column":0},"action":"remove","lines":["class PinsController < ApplicationController","  before_action :set_pin, only: [:show, :edit, :update, :destroy]","  before_action :authenticate_user!, except: [:index, :show]","  before_action :correct_user, only: [:edit, :update, :destroy]","  respond_to :html","","  def index","    @pins = Pin.all","    respond_with(@pins)","  end","","  def show","    respond_with(@pin)","  end","","  def new","    @pin = Pin.new","    respond_with(@pin)","  end","","  def edit","  end","","  def create","    @pin = Pin.new(pin_params)","    @pin.save","    respond_with(@pin)","  end","","  def update","    @pin.update(pin_params)","    respond_with(@pin)","  end","","  def destroy","    @pin.destroy","    respond_with(@pin)","  end","","  private","    def set_pin","      @pin = Pin.find(params[:id])","    end","","    def pin_params","      params.require(:pin).permit(:description)","    end","end",""],"id":2}],[{"start":{"row":0,"column":0},"end":{"row":58,"column":4},"action":"insert","lines":["class PinsController < ApplicationController","  before_action :set_pin, only: [:show, :edit, :update, :destroy]","  before_action :authenticate_user!, except: [:index, :show]","  before_action :correct_user, only: [:edit, :update, :destroy]","","  respond_to :html","","  def index","    @pins = Pin.all","  end","","  def show","  end","","  def new","    @pin = current_user.pins.build","  end","","  def edit","  end","","  def create","    @pin = current_user.pins.build(pin_params)","    if @pin.save","      redirect_to @pin, notice: 'Pin was successfully created.'","    else","      render action: 'new'","    end","  end","","  def update","   if @pin.update(pin_params)","      redirect_to @pin, notice: 'Pin was successfully updated.'","    else","      render action: 'edit'","    end","  end","","  def destroy","    @pin.destroy","    redirect_to pins_url","  end","","  private","    def set_pin","      @pin = Pin.find(params[:id])","    end","","    def pin_params","      params.require(:pin).permit(:description)","    end","","","  def correct_user","      @pin = current_user.pins.find_by(id: params[:id])","      redirect_to pins_path, notice: \"Not authorized to edit this pin\" if @pin.nil?","  end","","end "],"id":3}],[{"start":{"row":35,"column":3},"end":{"row":35,"column":7},"action":"remove","lines":[" end"],"id":4}],[{"start":{"row":35,"column":3},"end":{"row":35,"column":7},"action":"insert","lines":[" end"],"id":5}],[{"start":{"row":35,"column":2},"end":{"row":35,"column":4},"action":"remove","lines":["  "],"id":6}],[{"start":{"row":35,"column":0},"end":{"row":35,"column":2},"action":"remove","lines":["  "],"id":7}],[{"start":{"row":35,"column":0},"end":{"row":35,"column":1},"action":"insert","lines":[" "],"id":8}],[{"start":{"row":35,"column":1},"end":{"row":35,"column":2},"action":"insert","lines":[" "],"id":9}],[{"start":{"row":35,"column":2},"end":{"row":35,"column":3},"action":"insert","lines":[" "],"id":10}],[{"start":{"row":35,"column":3},"end":{"row":35,"column":4},"action":"insert","lines":[" "],"id":11}],[{"start":{"row":35,"column":2},"end":{"row":35,"column":4},"action":"remove","lines":["  "],"id":12}],[{"start":{"row":35,"column":0},"end":{"row":35,"column":2},"action":"remove","lines":["  "],"id":13}],[{"start":{"row":35,"column":0},"end":{"row":35,"column":1},"action":"insert","lines":[" "],"id":14}],[{"start":{"row":35,"column":1},"end":{"row":35,"column":2},"action":"insert","lines":[" "],"id":15}],[{"start":{"row":35,"column":2},"end":{"row":35,"column":3},"action":"insert","lines":[" "],"id":16}],[{"start":{"row":49,"column":46},"end":{"row":49,"column":47},"action":"insert","lines":[","],"id":17}],[{"start":{"row":49,"column":47},"end":{"row":49,"column":48},"action":"insert","lines":[":"],"id":18}],[{"start":{"row":49,"column":48},"end":{"row":49,"column":49},"action":"insert","lines":["i"],"id":19},{"start":{"row":49,"column":49},"end":{"row":49,"column":50},"action":"insert","lines":["m"]}],[{"start":{"row":49,"column":50},"end":{"row":49,"column":51},"action":"insert","lines":["a"],"id":20}],[{"start":{"row":49,"column":51},"end":{"row":49,"column":52},"action":"insert","lines":["g"],"id":21}],[{"start":{"row":49,"column":52},"end":{"row":49,"column":53},"action":"insert","lines":["e"],"id":22}],[{"start":{"row":49,"column":53},"end":{"row":49,"column":54},"action":"insert","lines":[","],"id":23}],[{"start":{"row":49,"column":54},"end":{"row":49,"column":55},"action":"insert","lines":[":"],"id":24}],[{"start":{"row":49,"column":55},"end":{"row":49,"column":56},"action":"insert","lines":["n"],"id":25}],[{"start":{"row":49,"column":56},"end":{"row":49,"column":57},"action":"insert","lines":["a"],"id":26},{"start":{"row":49,"column":57},"end":{"row":49,"column":58},"action":"insert","lines":["m"]}],[{"start":{"row":49,"column":58},"end":{"row":49,"column":59},"action":"insert","lines":["e"],"id":27}],[{"start":{"row":49,"column":54},"end":{"row":49,"column":55},"action":"insert","lines":[" "],"id":28}],[{"start":{"row":3,"column":2},"end":{"row":3,"column":63},"action":"remove","lines":["before_action :correct_user, only: [:edit, :update, :destroy]"],"id":29}],[{"start":{"row":3,"column":2},"end":{"row":3,"column":63},"action":"insert","lines":["before_action :correct_user, only: [:edit, :update, :destroy]"],"id":30}],[{"start":{"row":3,"column":2},"end":{"row":3,"column":63},"action":"remove","lines":["before_action :correct_user, only: [:edit, :update, :destroy]"],"id":31}],[{"start":{"row":53,"column":2},"end":{"row":57,"column":0},"action":"remove","lines":["def correct_user","      @pin = current_user.pins.find_by(id: params[:id])","      redirect_to pins_path, notice: \"Not authorized to edit this pin\" if @pin.nil?","  end",""],"id":32}],[{"start":{"row":3,"column":2},"end":{"row":3,"column":63},"action":"insert","lines":["before_action :correct_user, only: [:edit, :update, :destroy]"],"id":33}],[{"start":{"row":51,"column":0},"end":{"row":55,"column":0},"action":"insert","lines":["def correct_user","      @pin = current_user.pins.find_by(id: params[:id])","      redirect_to pins_path, notice: \"Not authorized to edit this pin\" if @pin.nil?","  end",""],"id":34}],[{"start":{"row":51,"column":0},"end":{"row":51,"column":1},"action":"insert","lines":[" "],"id":35},{"start":{"row":51,"column":1},"end":{"row":51,"column":2},"action":"insert","lines":[" "]}],[{"start":{"row":51,"column":2},"end":{"row":51,"column":3},"action":"insert","lines":[" "],"id":36}],[{"start":{"row":51,"column":3},"end":{"row":51,"column":4},"action":"insert","lines":[" "],"id":37}],[{"start":{"row":51,"column":4},"end":{"row":51,"column":5},"action":"insert","lines":[" "],"id":38}],[{"start":{"row":51,"column":5},"end":{"row":51,"column":6},"action":"insert","lines":[" "],"id":39}],[{"start":{"row":51,"column":6},"end":{"row":51,"column":7},"action":"insert","lines":[" "],"id":40}],[{"start":{"row":51,"column":7},"end":{"row":51,"column":8},"action":"insert","lines":[" "],"id":41}],[{"start":{"row":52,"column":6},"end":{"row":52,"column":7},"action":"insert","lines":[" "],"id":42}],[{"start":{"row":52,"column":7},"end":{"row":52,"column":8},"action":"insert","lines":[" "],"id":43}],[{"start":{"row":52,"column":8},"end":{"row":52,"column":9},"action":"insert","lines":[" "],"id":44},{"start":{"row":52,"column":9},"end":{"row":52,"column":10},"action":"insert","lines":[" "]}],[{"start":{"row":53,"column":6},"end":{"row":53,"column":7},"action":"insert","lines":[" "],"id":45}],[{"start":{"row":53,"column":7},"end":{"row":53,"column":8},"action":"insert","lines":[" "],"id":46}],[{"start":{"row":53,"column":8},"end":{"row":53,"column":9},"action":"insert","lines":[" "],"id":47}],[{"start":{"row":53,"column":9},"end":{"row":53,"column":10},"action":"insert","lines":[" "],"id":48}],[{"start":{"row":51,"column":7},"end":{"row":52,"column":0},"action":"insert","lines":["",""],"id":49},{"start":{"row":52,"column":0},"end":{"row":52,"column":7},"action":"insert","lines":["       "]}],[{"start":{"row":55,"column":2},"end":{"row":55,"column":3},"action":"insert","lines":[" "],"id":50},{"start":{"row":55,"column":3},"end":{"row":55,"column":4},"action":"insert","lines":[" "]}],[{"start":{"row":55,"column":4},"end":{"row":55,"column":5},"action":"insert","lines":[" "],"id":51}],[{"start":{"row":55,"column":5},"end":{"row":55,"column":6},"action":"insert","lines":[" "],"id":52}],[{"start":{"row":55,"column":6},"end":{"row":55,"column":7},"action":"insert","lines":[" "],"id":53}],[{"start":{"row":55,"column":7},"end":{"row":55,"column":8},"action":"insert","lines":[" "],"id":54}],[{"start":{"row":51,"column":6},"end":{"row":51,"column":7},"action":"remove","lines":[" "],"id":55}],[{"start":{"row":51,"column":4},"end":{"row":51,"column":6},"action":"remove","lines":["  "],"id":56}]]},"ace":{"folds":[],"scrolltop":437,"scrollleft":0,"selection":{"start":{"row":51,"column":4},"end":{"row":51,"column":4},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1437010990000,"hash":"8c6db85693484952509d8994ca1f2da8744ac86c"}